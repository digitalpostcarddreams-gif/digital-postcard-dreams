<!DOCTYPE html>
<html lang="it">

<head>
<title id="pageTitle">Articolo - Digital Postcard Dreams</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="format-detection" content="telephone=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="author" content="Digital Postcard Dreams">
<meta name="keywords" id="pageKeywords" content="personalizzazioni, design elegante, feste, celebrazioni">
<meta name="description" id="pageDescription" content="Personalizzazioni complete per ogni tipo di celebrazione.">
</head>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
	crossorigin="anonymous">

<link rel="stylesheet" type="text/css" href="css/vendor.css">
<link rel="stylesheet" type="text/css" href="style.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=Chilanka&family=Montserrat:wght@300;400;500&display=swap"
	rel="stylesheet">

</head>

<body>

	<header>
		<div class="container py-2">
			<div class="row py-4 pb-0 pb-sm-4 align-items-center">
				<div
					class="col-12 col-md-4 col-lg-3 d-flex justify-content-center justify-content-md-start align-items-center">
					<div class="site-name text-center text-md-start">
						<h1 class="display-6 display-md-4 fw-bold text-primary mb-0"
							style="font-family: 'Playfair Display', serif;">Digital
							Postcard Dreams</h1>
						<p class="text-muted mb-0 fs-6 d-none d-md-block">Crea,
							Personalizza, Condividi</p>
					</div>
				</div>

				<div
					class="col-12 col-md-4 col-lg-6 d-flex justify-content-center align-items-center mt-3 mt-md-0">
					<nav class="main-menu d-flex navbar navbar-expand-lg">
						<button class="navbar-toggler" type="button"
							data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
							aria-controls="offcanvasNavbar">
							<span class="navbar-toggler-icon"></span>
						</button>

						<div class="offcanvas offcanvas-end" tabindex="-1"
							id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
							<div class="offcanvas-header justify-content-center">
								<button type="button" class="btn-close"
									data-bs-dismiss="offcanvas" aria-label="Close"></button>
							</div>

							<div class="offcanvas-body justify-content-between">
								<ul
									class="navbar-nav menu-list list-unstyled d-flex gap-md-3 mb-0">
									<li class="nav-item"><a href="index.html"
										class="nav-link">Home</a></li>
									<li class="nav-item"><a href="party.html"
										class="nav-link" id="partyLink">Party Kit</a></li>
									<li class="nav-item"><a href="matrimonio.html"
										class="nav-link" id="matrimonioLink">Matrimonio</a></li>
									<li class="nav-item"><a href="bomboniere.html"
										class="nav-link" id="bomboniereLink">Bomboniere</a></li>
									<li class="nav-item"><a href="index.html#footer"
										class="nav-link">Contatti</a></li>
								</ul>
							</div>
						</div>
					</nav>
				</div>

				<div
					class="col-12 col-md-4 col-lg-3 d-flex justify-content-center justify-content-md-end align-items-center mt-3 mt-md-0">
					<div class="social-icons d-flex gap-4">
						<a href="https://www.instagram.com/digitalpostcarddreams"
							target="_blank" class="social-link" title="Seguici su Instagram">
							<iconify-icon icon="ri:instagram-fill" class="social-icon"></iconify-icon>
						</a> <a href="https://wa.me/393497195877" target="_blank"
							class="social-link" title="Contattaci su WhatsApp"> <iconify-icon
								icon="logos:whatsapp-icon" class="social-icon"></iconify-icon>
						</a>
					</div>
				</div>
			</div>
		</div>

	</header>

	<div style="position: relative; width: 100%; background: #fff;">
  <svg viewBox="0 0 1200 120" preserveAspectRatio="none"
       style="display: block; width: 100%; height: 40px;">
    <path d="M0,0 C150,50 350,0 600,50 C850,100 1050,50 1200,0 L1200,120 L0,120 Z"
          fill="#fbf3f0"></path>
  </svg>
</div>

	<div style="position: relative; width: 100%; background: #fff;">
  <svg viewBox="0 0 1200 120" preserveAspectRatio="none"
       style="display: block; width: 100%; height: 40px; transform: rotate(180deg);">
    <path d="M0,0 C150,50 350,0 600,50 C850,100 1050,50 1200,0 L1200,120 L0,120 Z"
          fill="#fbf3f0"></path>
  </svg>
</div>

	<!-- Breadcrumb -->
	<div class="container py-3">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb"
				style="font-family: 'Montserrat', sans-serif; color: #695841;">
				<li class="breadcrumb-item"><a href="index.html">Home</a></li>
				<li class="breadcrumb-item"><a href="#" id="breadcrumbCategory">Categoria</a></li>
				<li class="breadcrumb-item active" aria-current="page" id="breadcrumbProduct">Prodotto</li>
			</ol>
		</nav>
	</div>

	<!-- Product Detail Section -->
	<section class="py-5"
		style="position: relative; background: #fff; overflow: hidden;">
		<div class="container">
			<div class="row">
				<!-- Product Images -->
				<div class="col-lg-6 mb-4">
					<!-- Main Image -->
					<div class="product-image-container mb-3">
						<img id="mainImage" src=""
							class="img-fluid rounded-3 shadow-sm img-hover"
							alt=""
							style="width: 100%; height: 400px; object-fit: contain;">
					</div>

					<!-- Thumbnail Gallery -->
					<div class="thumbnail-gallery" id="thumbnailGallery">
						<!-- Le thumbnail verranno generate dinamicamente -->
					</div>
				</div>

				<!-- Product Details -->
				<div class="col-lg-6">
					<div class="product-details">
						<h1 class="product-title text-primary mb-3" id="productTitle"
							style="font-family: 'Montserrat', sans-serif; color: #695841;">Titolo Prodotto</h1>
						<div class="price-section mb-4">
							<h6 class="fs-3 text-dark" id="productPrice">€0.00</h6>
						</div>

						<div class="product-description mb-4" id="productDescription"
							style="font-family: 'avenir_next_condensedregular', sans-serif; color: #695841;">
							<!-- La descrizione verrà caricata dinamicamente -->
						</div>

					</div>
				</div>
			</div>
		</div>
		<svg viewBox="0 0 1200 120" preserveAspectRatio="none"
			style="position: absolute; bottom: 0; left: 0; width: 100%; height: 40px; z-index: 1;">
      <path
				d="M0,0 C150,50 350,0 600,50 C850,100 1050,50 1200,0 L1200,120 L0,120 Z"
				fill="#fbf3f0"></path>
    </svg>
	</section>

	<!-- Banner WhatsApp -->
	<section class="py-5"
		style="position: relative; background: #fbf3f0; overflow: hidden;">

		<div class="container" style="position: relative; z-index: 2;">
			<div class="row align-items-center">
				<div class="col-md-8"
					style="color: #695841; font-family: 'avenir_next_condensedregular', sans-serif;">
					<h3 class="fw-bold mb-3"
						style="font-family: 'Montserrat', sans-serif; color: #bf9e75;">
						Sei pronto a dare un tocco speciale al tuo evento?</h3>
					<p>
						Unisciti a chi ha già scelto <span
							style="color: #bf9e75; font-weight: bold;">DigitalPostcardDreams
						</span>per un tocco personalizzato e autentico
					</p>
				</div>
				<div class="col-md-4 text-center text-md-end">
					<a
						href="https://wa.me/393497195877?text=Ciao! Vorrei informazioni sulle personalizzazioni per eventi"
						target="_blank" class="btn btn-outline-primary"
						style="font-family: 'avenir_next_condensedregular', sans-serif;">
						<iconify-icon icon="logos:whatsapp-icon" class="me-2"></iconify-icon>
						Contattami su WhatsApp
					</a>
				</div>
			</div>
		</div>
	</section>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
		crossorigin="anonymous"></script>
	<script
		src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

	<script>

		// Funzione per ottenere i parametri URL
		function getUrlParameter(name) {
			name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
			var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
			var results = regex.exec(location.search);
			return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
		}

		// Funzione per caricare i dati del prodotto
		function loadProductData() {
			const productId = getUrlParameter('id');
			const category = getUrlParameter('category');
			
			console.log('Parametri:', { productId, category });
			
			if (!productId || !category) {
				console.error('Parametri mancanti: id e category sono richiesti');
				showError('Parametri URL mancanti');
				return;
			}

			// Carica SEMPRE dal config.json - nessun fallback
			const basePath = '';
			
			// Mapping speciale per prodotti con nomi diversi dalle cartelle
			const folderMapping = {
				'bottiglia1': 'bottiglia',
				'bottiglia2': 'bottiglia'
			};
			
			// Determina il nome della cartella da usare
			const folderName = folderMapping[productId] || productId;
			const configPath = `${basePath}immagini/${category}/${folderName}/config.json`;
			
			console.log(`Tentativo di caricamento da: ${configPath}`);
			console.log(`URL completo: ${window.location.origin}/${configPath}`);

			// Usa fetch con gestione errori per CORS
			fetch(configPath)
				.then(response => {
					console.log('Response status:', response.status);
					console.log('Response headers:', response.headers);
					if (!response.ok) {
						throw new Error(`HTTP ${response.status}: File config.json non trovato - URL: ${configPath}`);
					}
					return response.text(); // Prima leggi come testo per debug
				})
				.then(text => {
					console.log('Raw JSON text:', text);
					try {
						const productConfig = JSON.parse(text);
						console.log('Config caricato da JSON:', productConfig);
						loadProductConfig(productConfig, category);
					} catch (parseError) {
						console.error('Errore nel parsing JSON:', parseError);
						showError(`Errore nel parsing del file JSON per: ${productId}`);
					}
				})
				.catch(error => {
					console.error('Errore completo nel caricamento:', error);
					console.error('Stack trace:', error.stack);
					showError(`File di configurazione non trovato per: ${productId} - ${error.message}`);
				});
		}

		// Funzione per caricare la configurazione del prodotto
		function loadProductConfig(productConfig, category) {
			const productId = getUrlParameter('id');
			
			// Aggiorna il titolo della pagina
			const pageTitle = document.getElementById('pageTitle');
			const pageKeywords = document.getElementById('pageKeywords');
			const pageDescription = document.getElementById('pageDescription');
			
			if (pageTitle) pageTitle.textContent = `${productConfig.title} - Digital Postcard Dreams`;
			if (pageKeywords) pageKeywords.content = productConfig.keywords || '';
			if (pageDescription) pageDescription.content = productConfig.description || '';

			// Aggiorna il breadcrumb
			const categoryLinks = {
				'partykit': { url: 'party.html', name: 'Party Kit' },
				'matrimonio': { url: 'matrimonio.html', name: 'Matrimonio' },
				'bomboniere': { url: 'bomboniere.html', name: 'Bomboniere' }
			};
			
			const categoryInfo = categoryLinks[category];
			if (categoryInfo) {
				const breadcrumbCategory = document.getElementById('breadcrumbCategory');
				const breadcrumbProduct = document.getElementById('breadcrumbProduct');
				const categoryLink = document.getElementById(`${category}Link`);
				
				if (breadcrumbCategory) {
					breadcrumbCategory.href = categoryInfo.url;
					breadcrumbCategory.textContent = categoryInfo.name;
				}
				if (breadcrumbProduct) {
					breadcrumbProduct.textContent = productConfig.title;
				}
				
				// Evidenzia il link attivo nel menu
				if (categoryLink) {
					categoryLink.classList.add('active');
				}
			}

			// Aggiorna i dettagli del prodotto
			const productTitle = document.getElementById('productTitle');
			const productPrice = document.getElementById('productPrice');
			const productDescription = document.getElementById('productDescription');
			
			if (productTitle) productTitle.textContent = productConfig.title;
			if (productPrice) productPrice.textContent = productConfig.price;
			if (productDescription) productDescription.innerHTML = productConfig.description;

			// Carica le immagini
			loadProductImages(productId, category);
		}

		// Funzione per mostrare errori
		function showError(message) {
			const productTitle = document.getElementById('productTitle');
			const productPrice = document.getElementById('productPrice');
			const productDescription = document.getElementById('productDescription');
			
			if (productTitle) productTitle.textContent = 'Errore';
			if (productPrice) productPrice.textContent = '€0.00';
			if (productDescription) productDescription.innerHTML = `<p class="text-danger">${message}</p>`;
		}

		// Funzione semplificata per caricare le immagini del prodotto
		function loadProductImages(productId, category) {
			const thumbnailGallery = document.getElementById('thumbnailGallery');
			const mainImage = document.getElementById('mainImage');
			
			if (!mainImage) {
				console.error('Elemento mainImage non trovato');
				return;
			}

			console.log(`Caricamento immagini per prodotto: ${productId}, categoria: ${category}`);

			// Sistema dinamico per trovare automaticamente tutte le immagini
			const basePath = '';
			
			// Mapping speciale per prodotti con nomi diversi dalle cartelle
			const folderMapping = {
				'bottiglia1': 'bottiglia',
				'bottiglia2': 'bottiglia'
			};
			
			// Determina il nome della cartella da usare
			const folderName = folderMapping[productId] || productId;
			
			// Lista delle estensioni di immagini supportate
			const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];
			
			// Lista dei pattern di nomi comuni per le immagini
			const commonPatterns = [
				`${productId}1`, `${productId}2`, `${productId}3`, `${productId}4`, `${productId}5`,
				`${productId}`, `${productId}_1`, `${productId}_2`, `${productId}_3`,
				'image1', 'image2', 'image3', 'image4', 'image5',
				'foto1', 'foto2', 'foto3', 'foto4', 'foto5',
				'img1', 'img2', 'img3', 'img4', 'img5',
				'photo1', 'photo2', 'photo3', 'photo4', 'photo5'
			];

			console.log('Pattern di ricerca:', commonPatterns);
			console.log('Nome cartella:', folderName);

			// Prova a caricare le immagini con tutti i pattern possibili
			let foundImages = [];
			let currentPattern = 0;

			function tryLoadPattern(patternIndex) {
				if (patternIndex >= commonPatterns.length) {
					console.log('Immagini trovate:', foundImages);
					if (foundImages.length > 0) {
						createImageGallery(foundImages);
					} else {
						showNoImagesMessage();
					}
					return;
				}

				const pattern = commonPatterns[patternIndex];
				let extensionIndex = 0;

				function tryExtension(extIndex) {
					if (extIndex >= imageExtensions.length) {
						// Prova il prossimo pattern
						tryLoadPattern(patternIndex + 1);
						return;
					}

					const imagePath = `${basePath}immagini/${category}/${folderName}/immaginiProdotto/${pattern}${imageExtensions[extIndex]}`;
					console.log(`Testando: ${imagePath}`);

		// Prova a caricare l'immagine direttamente
		const img = new Image();
		img.onload = function() {
			console.log(`✅ Immagine trovata: ${imagePath}`);
			foundImages.push(imagePath);
			tryExtension(extIndex + 1);
		};
		img.onerror = function() {
			console.log(`❌ Non trovata: ${imagePath}`);
			tryExtension(extIndex + 1);
		};
		img.src = imagePath;
				}

				tryExtension(0);
			}

			function createImageGallery(imagePaths) {
				// Carica la prima immagine come principale
				if (imagePaths.length > 0) {
					mainImage.src = imagePaths[0];
					mainImage.alt = `${productId} - Immagine principale`;
					console.log(`Immagine principale caricata: ${imagePaths[0]}`);
				}

				// Crea le thumbnail
				if (thumbnailGallery && imagePaths.length > 0) {
					let thumbnailHTML = '<div class="row g-2">';
					imagePaths.forEach((imagePath, index) => {
						thumbnailHTML += `
							<div class="col-3">
								<img src="${imagePath}" class="img-fluid rounded thumbnail"
									alt="${productId} - Vista ${index + 1}"
									style="width: 100%; height: 80px; object-fit: contain; background: #f8f9fa; cursor: pointer; opacity: 0.7;"
									onclick="changeMainImage(this.src)"
									onmouseover="this.style.opacity='1'"
									onmouseout="if(this !== document.querySelector('.thumbnail.active')) this.style.opacity='0.7'">
							</div>
						`;
					});
					thumbnailHTML += '</div>';
					
					thumbnailGallery.innerHTML = thumbnailHTML;

					// Inizializza la prima thumbnail come attiva
					const firstThumbnail = thumbnailGallery.querySelector('.thumbnail');
					if (firstThumbnail) {
						firstThumbnail.style.opacity = '1';
						firstThumbnail.style.border = '2px solid #007bff';
						firstThumbnail.classList.add('active');
					}
				}
			}

			function showNoImagesMessage() {
				console.log('Nessuna immagine trovata');
				if (mainImage) {
					mainImage.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjhGOUZBIi8+CjxwYXRoIGQ9Ik0xNzUgMTI1SDIyNVYxNzVIMTc1VjEyNVoiIGZpbGw9IiNEOUQ5RDkiLz4KPHBhdGggZD0iTTE4NSAxMzVIMjE1VjE2NUgxODVWMTM1WiIgZmlsbD0iI0NDQ0NDQyIvPgo8dGV4dCB4PSIyMDAiIHk9IjE5MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjNjY2NjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JbW1hZ2luZSBub24gZGlzcG9uaWJpbGU8L3RleHQ+Cjwvc3ZnPgo=';
					mainImage.alt = 'Immagine non disponibile';
				}
				
				if (thumbnailGallery) {
					thumbnailGallery.innerHTML = '<div class="text-center text-muted"><small>Nessuna immagine disponibile</small></div>';
				}
			}

			// Inizia la ricerca dinamica delle immagini
			tryLoadPattern(0);
		}

		// Funzione per cambiare l'immagine principale
		function changeMainImage(src) {
			const mainImage = document.getElementById('mainImage');
			if (!mainImage) {
				console.error('Elemento mainImage non trovato');
				return;
			}

			console.log('Cambio immagine principale a:', src);
			
			mainImage.src = src;
			
			// Rimuovi la classe active da tutte le thumbnail
			document.querySelectorAll('.thumbnail').forEach(thumb => {
				thumb.style.opacity = '0.7';
				thumb.style.border = 'none';
				thumb.classList.remove('active');
			});
			
			// Aggiungi la classe active alla thumbnail cliccata
			const clickedThumbnail = document.querySelector(`img[src="${src}"]`);
			if (clickedThumbnail) {
				clickedThumbnail.style.opacity = '1';
				clickedThumbnail.style.border = '2px solid #007bff';
				clickedThumbnail.classList.add('active');
			}
		}

		// Carica i dati quando la pagina è pronta
		document.addEventListener('DOMContentLoaded', function() {
			console.log('DOM caricato, inizializzo...');
			loadProductData();
		});
	</script>

	<!-- CSS per effetti hover -->
	<style>
.img-hover {
	transition: transform 0.3s ease, box-shadow 0.3s ease;
	cursor: pointer;
}

.img-hover:hover {
	transform: scale(1.05);
	box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
	z-index: 10;
	position: relative;
}

.card {
	overflow: hidden;
	transition: transform 0.3s ease;
}

.card:hover {
	transform: translateY(-5px);
	box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.thumbnail {
	transition: opacity 0.3s ease;
}

.thumbnail:hover {
	opacity: 0.7;
}

.product-image-container {
	position: relative;
}

.zoom-icon {
	opacity: 0.8;
}
</style>

</body>

</html>


